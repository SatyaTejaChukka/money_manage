# ============================================================
# WealthSync — Environment Configuration
# ============================================================
# Copy this file to backend/.env for local development:
#   cp .env.example backend/.env
# Then edit the values below as needed.
# ============================================================

# ── App Settings ────────────────────────────────────────────
PROJECT_NAME=WealthSync
API_V1_STR=/api/v1
ENVIRONMENT=development                   # development | production
DEBUG=False                                # True enables verbose error responses
ENABLE_DOCS=True                           # True exposes /docs (Swagger UI)
AUTO_CREATE_TABLES=True                    # True = auto-create tables on startup (dev only; use False + Alembic in production)

# ── Security ────────────────────────────────────────────────
# REQUIRED — Generate with: python -c "import secrets; print(secrets.token_hex(32))"
SECRET_KEY=change-me-to-a-random-64-char-hex-string

ACCESS_TOKEN_EXPIRE_MINUTES=11520          # 8 days (60 * 24 * 8)
PASSWORD_MIN_LENGTH=8                      # Minimum password length for signup
RATE_LIMIT_LOGIN=5/minute                  # Max login attempts per IP
RATE_LIMIT_SIGNUP=3/minute                 # Max signup attempts per IP

# ── CORS & Hosts ────────────────────────────────────────────
# Accepts a JSON array or comma-separated list of origins.
# For local dev with Vite (port 5173):
BACKEND_CORS_ORIGINS=["http://localhost:5173","http://localhost:3000"]

# Allowed host headers (leave empty to allow all in development):
ALLOWED_HOSTS=[]

# ── Database ────────────────────────────────────────────────
# Option A: Individual connection parts (used when DATABASE_URL is not set)
POSTGRES_SERVER=localhost                  # "db" when using Docker Compose
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=wealth_sync

# Option B: Full connection string (takes priority over individual parts)
# For local PostgreSQL:
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost/wealth_sync
# For Supabase (production example):
# DATABASE_URL=postgresql://postgres:YourPassword@db.xxxx.supabase.co:5432/postgres?ssl=require
#   └─ NOTE: Use ssl=require (not sslmode=require) for asyncpg compatibility
#   └─ NOTE: URL-encode special chars in password (e.g., @ → %40)

# Connection pool tuning:
DB_POOL_SIZE=5                             # Concurrent connections kept open
DB_MAX_OVERFLOW=10                         # Extra connections allowed under load

# ── Redis (Optional) ───────────────────────────────────────
# Required only if using Celery background tasks.
# Leave as-is if not using task queue.
REDIS_URL=redis://localhost:6379/0         # "redis://redis:6379/0" in Docker Compose

# ── Monitoring (Optional) ──────────────────────────────────
# Sentry DSN for error tracking. Leave empty to disable.
SENTRY_DSN=

# ── Frontend (Vite) ────────────────────────────────────────
# These are used by the frontend build (prefix VITE_ required).
VITE_API_BASE_URL=http://localhost:8000/api/v1
VITE_ENVIRONMENT=development
